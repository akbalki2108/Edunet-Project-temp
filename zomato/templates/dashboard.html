{% load static%}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>

    <link rel="stylesheet" href="{% static 'navBar.css' %}">
    <style>

        
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #e0daed;
        }


       

        .heading {
            margin: 20px auto;
            padding: 0 20px;
            margin-left: 35px;
            display: flex;
        }
        
        /* ---------------------------------------------------------------------------------- */
        /**
        * Carousal CSS 
        */
        @keyframes scroll {
            0% { transform: translateX(0); }
            100% { transform: translateX(calc(-250px * 5))}
        }

        .slider {
            background: white;
            box-shadow: 0 10px 20px -5px rgba(0, 0, 0, .125);
            height: 100px;
            margin: auto;
            overflow:hidden;
            position: relative;
            width: 90%;
            text-align: center;
        }

        .slider::before,
        .slider::after {
            background: linear-gradient(to right,  rgba(255,255,255,1) 0%,rgba(255,255,255,0) 100%);
            content: "";
            height: 100px;
            position: absolute;
            width: 200px;
            z-index: 2;
        }

        .slider::after {
            right: 0;
            top: 0;
            transform: rotateZ(180deg);
        }

        .slider::before {
            left: 0;
            top: 0;
        }

        .slider .slide-track {
            animation: scroll 40s linear infinite;
            display: flex;
            width: calc(250px * 10);
        }

        .slider .slide {
            height: 100px;
            width: 250px;
        }

        .slide {
            border-right: 1px solid black;
        }

        /* ---------------------------------------------------------------------------------- */

        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            box-sizing: border-box;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }

        .card {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            overflow: hidden;
            transition: transform 0.3s;
            width: calc(20% - 30px);
            /* Adjusted width to display 5 cards in a row with margin */
            box-sizing: border-box;
        }

        .card:not(:nth-child(5n)) {/* Adjusted 5 card*/
            margin-right: 20px;
        }

        .card:hover {
            transform: scale(1.05);
        }

        .card-content {
            padding: 10px;
            text-align: center; 
            display: flex;
            flex-direction: column; 
            align-items: center;
        }


        h2 {
            margin-top: 0;
            color: #333;
        }

        p {
            color: #666;
        }

        @media (max-width: 767px) {
            .card {
                width: 100%;
                margin-right: 0;
            }
        }

       #chartsContainer {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }

        #chartCard1,
        #chartCard2 {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            overflow: hidden;
            transition: transform 0.3s;
            width: calc(50% - 40px); /* Adjusted width for two charts in a row with margin */
            box-sizing: border-box;
            max-width: 600px; /* Adjust the maximum width as needed */
            margin: 20px auto;
            padding: 10px;
            text-align: center;
        }

        #chartCard1:hover,
        #chartCard2:hover {
            transform: scale(1.05);
        }

        #restaurantChart1,
        #restaurantChart2 {
            width: 100%;
            max-height: 400px; /* Adjust the maximum height as needed */
            margin-top: 10px;
        }

    </style>

    <!-- Add this in the <head> section of your HTML file -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.2.1/dist/chart.umd.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

<body>

    <div class="topnav">
        <a href="/">Home</a>
        <a class="active" href="/dashboard">Dashboard</a>
        <a href="/filter_data">Filter</a>
        <a href="/about">About</a>
    </div>

    <div class="heading">
        <h1>Dashboard</h1>
    </div>
    
    <div class="slider">
        <div class="slide-track">
            <div class="slide">
                <h3>Total Restaurant</h3>
                <p>{{value.tRestaurant}}</p>
            </div>
            <div class="slide">
                <h3>Avg Rating</h3>
                <p>{{value.average_rating}}</p>
            </div>
            <div class="slide">
                <h3>Most Voted Restaurant</h3>
                <p>{{value.most_voted_restaurant}}</p>
            </div>
            <div class="slide">
                <h3>Avg Cost for Two People</h3>
                <p>{{value.average_cost_for_two}}</p>
            </div>
            <div class="slide">
                <h3>Location with Most Restaurant</h3>
                <p>{{value.topRestaurant}}</p>
            </div>
            <div class="slide">
                <h3>Online Service Available</h3>
                <p>{{value.online_order_counts}}</p>
            </div>
            <div class="slide">
                <h3>Dine In Available</h3>
                <p>{{value.table_booking_counts}}</p>
            </div>
            <div class="slide">
                <h3>Trending Restaurant Type</h3>
                <p>{{value.top_Restaurant_type}}</p>
            </div>
            <div class="slide">
                <h3>Popular Cuisines</h3>
                <p>{{value.top_cuisines}}</p>
            </div>
            <div class="slide">
                <h3>Popular Listing Type</h3>
                <p>{{value.top_listed_in_type}}</p>
            </div>
        </div>
    </div>

    <div id="chartsContainer">
        <div class="card" id="chartCard1">
            <div class="card-content">
                <h2>Restaurant Type Distribution</h2>
                <canvas id="restaurantChart1"></canvas>
            </div>
        </div>
    
        <div class="card" id="chartCard2">
            <div class="card-content">
                <h2>Listed in Type Distribution</h2>
                <canvas id="restaurantChart2"></canvas>
            </div>
        </div>
    </div>

    <!-- labels: ["Delivery", "Dine-out", "Desserts", "Cafes", "Drinks & nightlife", "Buffet", "Pubs and bars"], -->


    <script>
        
        document.addEventListener('DOMContentLoaded', function () {

            var restaurantTypeData = {
                labels: ["Quick Bites", "Casual Dining", "others", "Cafe", "Delivery", "Dessert Parlor", "Takeaway, Delivery", "Casual Dining, Bar", "Bakery"],
                datasets: [{
                    label: 'Number of Restaurants',
                    data: [19129, 10326, 9092, 3732, 2595, 2262, 2035, 1154, 1141],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.2)', // Red
                        'rgba(54, 162, 235, 0.2)', // Blue
                        'rgba(255, 206, 86, 0.2)', // Yellow
                        'rgba(75, 192, 192, 0.2)', // Teal
                        'rgba(153, 102, 255, 0.2)', // Purple
                        'rgba(255, 159, 64, 0.2)', // Orange
                        'rgba(200, 200, 200, 0.2)', // Light Gray
                        'rgba(255, 0, 0, 0.2)', // Bright Red
                        'rgba(0, 255, 0, 0.2)' // Bright Green
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(255, 159, 64, 1)',
                        'rgba(200, 200, 200, 1)',
                        'rgba(255, 0, 0, 1)',
                        'rgba(0, 255, 0, 1)'
                    ],
                    borderWidth: 1
                }]
            };

            // Get the canvas element and create a bar chart
            var ctx1 = document.getElementById('restaurantChart1').getContext('2d');
            var myChart1 = new Chart(ctx1, {
                type: 'bar',
                data: restaurantTypeData,
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            var labels = {{ value.listed_in_type_distribution.labels| safe}};
            var data = {{ value.listed_in_type_distribution.data| safe}};

            // Get the data for the second chart (replace this with your actual data)
            var listedInTypeData = {
                labels:  labels,
                datasets: [{
                    label: 'Number of Restaurants',
                    data: data,
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(153, 102, 255, 0.2)',
                        'rgba(200, 200, 200, 0.2)',
                        'rgba(255, 0, 0, 0.2)'
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(200, 200, 200, 1)',
                        'rgba(255, 0, 0, 1)'
                    ],
                    borderWidth: 1
                }]
            };

            // Get the canvas element and create another chart
            var ctx2 = document.getElementById('restaurantChart2').getContext('2d');
            var myChart2 = new Chart(ctx2, {
                type: 'bar', // You can choose the chart type based on your data
                data: listedInTypeData,
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        });
    </script>

    <div id="plotly-chart-container" style="margin: auto 20px;">{{ value.graph|safe }}</div>
    <div id="plotly-chart-container" style="margin: auto 20px;">{{ value.graph2|safe }}</div>

    <!-- JavaScript to make the plot responsive -->
    <script>
        window.addEventListener('resize', function () {
            Plotly.Plots.resize(document.getElementById('plotly-chart-container'));
        });
    </script>

</body>

</html>
    